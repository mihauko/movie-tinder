{"version":3,"sources":["styles.js","components/MovieTinder/context.js","components/MovieTinder/MovieHeader/styles.js","components/MovieTinder/MovieHeader/MovieHeader.js","components/MovieTinder/MovieImg/styles.js","components/MovieTinder/MovieImg/MovieImg.js","components/MovieTinder/MovieDescription/styles.js","components/MovieTinder/MovieDescription/MovieDescription.js","settings.js","components/MovieTinder/MovieButtons/styles.js","components/MovieTinder/MovieButtons/MovieButtons.js","components/MovieTinder/MovieSwipeWrapper/styles.js","components/MovieTinder/MovieSwipeWrapper/MovieSwipeWrapper.js","components/MovieTinder/MovieTinder.js","components/MovieTinder/MovieTinderQueryProvider/MovieTinderQueryProvider.js","containers/MovieContainer/MovieContainer.js","App.js","index.js"],"names":["Root","styled","main","MovieContext","React","createContext","header","MovieHeader","title","rating","BackgroundImage","div","src","MovieImg","p","MovieDescription","summary","buttonActionTypes","Object","freeze","ACCEPT","REJECT","StyledButtonsGroup","ButtonGroup","MovieButtons","handleClick","fullWidth","color","aria-label","Button","variant","onClick","article","MovieSwipeWrapper","children","handleSwipe","handlers","useSwipeable","onSwipedLeft","onSwipedRight","preventDefaultTouchmoveEvent","trackMouse","id","MovieTinder","Consumer","isLoadingData","filteredMovie","imageURL","MovieTinderQueryProvider","useState","moviesList","setMoviesList","setLoadingStatus","prevMovieList","value","ref","useRef","useEffect","current","usePrevious","setFilteredMovieList","filterMovies","list","movie","find","element","undefined","isAccepted","updateMovie","updatedMovieData","movieId","findIndex","actionType","a","axios","put","response","data","console","log","fetchMovie","get","error","movieContextData","Provider","MovieContainer","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0UAGO,IAAMA,EAAOC,IAAOC,KAAV,KCEFC,EAFMC,IAAMC,gB,kKCApB,IAAML,EAAOC,IAAOK,OAAV,KCeFC,EAZK,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,OAAV,OAClB,kBAAC,EAAD,eACMD,EADN,YACeC,EADf,S,4MCJK,IAAMC,EAAkBT,IAAOU,IAAV,KACR,qBAAGC,OCWRC,EATE,SAAC,GAAD,IAAGD,EAAH,EAAGA,IAAKJ,EAAR,EAAQA,MAAR,OACf,kBAACE,EAAD,CAAiBE,IAAKA,EAAKJ,MAAOA,K,2FCJ7B,IAAMR,EAAOC,IAAOa,EAAV,KCaFC,EAVU,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAH,OACvB,kBAAC,EAAD,KACGA,I,QCNQC,EAAoBC,OAAOC,OAAO,CAC7CC,OAAQ,SACRC,OAAQ,W,gPCAH,IAAMC,EAAqBrB,YAAOsB,IAAPtB,CAAH,KCmBhBuB,EAfM,SAAC,GAAD,IAAGC,EAAH,EAAGA,YAAH,OACnB,kBAACH,EAAD,CAAoBI,WAAS,EAACC,MAAM,YAAYC,aAAW,mCACzD,kBAACC,EAAA,EAAD,CAAQF,MAAM,UAAUG,QAAQ,YAAYC,QAAS,kBAAMN,EAAYR,EAAkBG,UAAzF,UAGA,kBAACS,EAAA,EAAD,CAAQF,MAAM,YAAYG,QAAQ,YAAYC,QAAS,kBAAMN,EAAYR,EAAkBI,UAA3F,Y,uKCVG,IAAMrB,EAAOC,IAAO+B,QAAV,KC0BFC,EArBW,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,SAAUC,EAAkB,EAAlBA,YAC/BC,EAAWC,YAAa,CAC5BC,aAAc,kBAAMH,EAAYlB,EAAkBI,SAClDkB,cAAe,kBAAMJ,EAAYlB,EAAkBI,SACnDmB,8BAA8B,EAC9BC,YAAY,IAGd,OAEE,kBAAC,EAAD,eAAMC,GAAG,aAAgBN,GACtBF,ICQQS,EAjBK,kBAClB,kBAAC,EAAaC,SAAd,MACG,YAAoD,IAAjDC,EAAgD,EAAhDA,cAAeC,EAAiC,EAAjCA,cAAerB,EAAkB,EAAlBA,YAChC,OAAIoB,EAAsB,+CACrBC,EAEH,kBAAC,EAAD,CAAmBX,YAAaV,GAC9B,kBAAC,EAAD,CAAajB,MAAOsC,EAActC,MAAOC,OAAQqC,EAAcrC,SAC/D,kBAAC,EAAD,CAAUD,MAAOsC,EAActC,MAAOI,IAAKkC,EAAcC,WACzD,kBAAC,EAAD,CAAkB/B,QAAS8B,EAAc9B,UACzC,kBAAC,EAAD,CAAcS,YAAaA,KANJ,8D,0DCuElBuB,EA7EkB,SAAC,GAAkB,IAAhBd,EAAe,EAAfA,SAAe,EACbe,mBAAS,IADI,mBAC1CC,EAD0C,KAC9BC,EAD8B,OAEPF,oBAAS,GAFF,mBAE1CJ,EAF0C,KAE3BO,EAF2B,KAU3CC,EAPc,SAACC,GACnB,IAAMC,EAAMC,mBAIZ,OAHAC,qBAAU,WACRF,EAAIG,QAAUJ,KAETC,EAAIG,QAESC,CAAYT,GAVe,EAWHD,mBAAS,IAXN,mBAW1CH,EAX0C,KAW3Bc,EAX2B,KAa3CC,EAAe,SAACC,GACpB,IAAMC,EAAQD,EAAKE,MAAK,SAACC,GAAD,YAAoCC,IAAvBD,EAAQE,cAC7CP,EAAqBG,IAGjBK,EAAc,SAACC,GACnB,IAAMC,EAAUpB,EAAWqB,WAAU,SAACR,GAAD,OAAWA,EAAMrB,KAAO2B,EAAiB3B,MAC9EQ,EAAWoB,GAAWD,EACtBlB,EAAcD,GACdW,EAAaX,IAGTzB,EAAW,uCAAG,WAAO+C,GAAP,eAAAC,EAAA,+EAEOC,IAAMC,IAAN,UNnCM,0CMmCN,OAAmC7B,EAAcJ,GAAjD,YAAuD8B,GAAvD,eAClB1B,EADkB,CAErBqB,WAAYlD,EAAkBG,SAAWoD,KAJ3B,OAEVI,EAFU,OAMhBR,EAAYQ,EAASC,MACrBC,QAAQC,IAAIP,GAPI,gDAShBM,QAAQC,IAAR,MATgB,yDAAH,sDAajBtB,qBAAU,WACR,IAAMuB,EAAU,uCAAG,4BAAAP,EAAA,+EAEQC,IAAMO,INjDF,0CM+CZ,QAETL,EAFS,UAIbxB,GAAiB,GACjBD,EAAcyB,EAASC,OAEzBC,QAAQC,IAAI,kCAPG,gDASfD,QAAQI,MAAR,MATe,yDAAH,0DAaMhB,IAAlBb,IACFD,GAAiB,GACjB4B,KAEE9B,GACFW,EAAaX,KAEd,CAACG,EAAeH,IAEnB,IAAMiC,EAAmB,CACvBtC,gBACAC,gBACArB,eAEF,OACE,kBAAC,EAAa2D,SAAd,CAAuB9B,MAAO6B,GAC3BjD,IC3DQmD,EAXQ,kBACrB,kBAAC,EAAD,KACE,kBAAC,EAAD,QCMWC,MARf,WACE,OACE,kBAACtF,EAAD,KACE,kBAAC,EAAD,QCHNuF,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.4396bf7e.chunk.js","sourcesContent":["import styled from 'styled-components';\n\n\nexport const Root = styled.main`\n  max-width: 500px;\n`;\n","import React from 'react';\n\n\nconst MovieContext = React.createContext();\n\nexport default MovieContext;\n","import styled from 'styled-components';\n\n\nexport const Root = styled.header`\n    font-size: 2rem;\n    line-height: 2rem;\n    text-align: center;\n    padding: 1rem;\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Root } from './styles';\n\n\nconst MovieHeader = ({ title, rating }) => (\n  <Root>\n    {`${title} ${rating}/10`}\n  </Root>\n);\n\n\nMovieHeader.propTypes = {\n  title: PropTypes.string,\n  rating: PropTypes.number,\n};\n\nexport default MovieHeader;\n","import styled from 'styled-components';\n\n\nexport const BackgroundImage = styled.div`\n  background: url(${({ src }) => src}) center center / cover no-repeat rgb(250, 250, 250);\n  width: 100%;\n  min-height: 15rem;\n  flex: 1 0 auto;\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { BackgroundImage } from './styles';\n\n\nconst MovieImg = ({ src, title }) => (\n  <BackgroundImage src={src} title={title} />\n);\n\nMovieImg.propTypes = {\n  src: PropTypes.string,\n  title: PropTypes.string,\n};\n\nexport default MovieImg;\n","import styled from 'styled-components';\n\n\nexport const Root = styled.p`\n    padding: 1rem;\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Root } from './styles';\n\n\nconst MovieDescription = ({ summary }) => (\n  <Root>\n    {summary}\n  </Root>\n);\n\nMovieDescription.propTypes = {\n  summary: PropTypes.string,\n};\n\nexport default MovieDescription;\n","export const RECOMMENDATIONS_URL = 'http://127.0.0.1:3001/recommendations/';\n\nexport const buttonActionTypes = Object.freeze({\n  ACCEPT: 'accept',\n  REJECT: 'reject',\n});\n","import styled from 'styled-components';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\n\n\nexport const StyledButtonsGroup = styled(ButtonGroup)`\n  height: 50px;\n  \n  .MuiButton-containedPrimary {\n    background-color: forestgreen;\n    \n    &:focus {\n      background-color: forestgreen;\n    }\n  }\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\n\nimport { buttonActionTypes } from '../../../settings';\nimport { StyledButtonsGroup } from './styles';\n\n\nconst MovieButtons = ({ handleClick }) => (\n  <StyledButtonsGroup fullWidth color=\"secondary\" aria-label=\"outlined secondary button group\">\n    <Button color=\"primary\" variant=\"contained\" onClick={() => handleClick(buttonActionTypes.ACCEPT)}>\n      Accept\n    </Button>\n    <Button color=\"secondary\" variant=\"contained\" onClick={() => handleClick(buttonActionTypes.REJECT)}>\n      Reject\n    </Button>\n  </StyledButtonsGroup>\n);\n\nMovieButtons.propTypes = {\n  handleClick: PropTypes.func,\n};\n\nexport default MovieButtons;\n","import styled from 'styled-components';\n\n\nexport const Root = styled.article`\n  max-width: 100vw;\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSwipeable } from 'react-swipeable';\n\nimport { buttonActionTypes } from '../../../settings';\nimport { Root } from './styles';\n\n\nconst MovieSwipeWrapper = ({ children, handleSwipe }) => {\n  const handlers = useSwipeable({\n    onSwipedLeft: () => handleSwipe(buttonActionTypes.REJECT),\n    onSwipedRight: () => handleSwipe(buttonActionTypes.REJECT),\n    preventDefaultTouchmoveEvent: true,\n    trackMouse: true,\n  });\n\n  return (\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    <Root id=\"swipeable\" {...handlers}>\n      {children}\n    </Root>\n  );\n};\n\nMovieSwipeWrapper.propTypes = {\n  children: PropTypes.node,\n  handleSwipe: PropTypes.func,\n};\n\nexport default MovieSwipeWrapper;\n","import React from 'react';\n\nimport MovieContext from './context';\nimport MovieHeader from './MovieHeader';\nimport MovieImg from './MovieImg';\nimport MovieDescription from './MovieDescription';\nimport MovieButtons from './MovieButtons';\nimport MovieSwipeWrapper from './MovieSwipeWrapper';\n\n\nconst MovieTinder = () => (\n  <MovieContext.Consumer>\n    {({ isLoadingData, filteredMovie, handleClick }) => {\n      if (isLoadingData) return <div>Loading data..</div>;\n      if (!filteredMovie) return <div>Sorry, there is not data.</div>;\n      return (\n        <MovieSwipeWrapper handleSwipe={handleClick}>\n          <MovieHeader title={filteredMovie.title} rating={filteredMovie.rating} />\n          <MovieImg title={filteredMovie.title} src={filteredMovie.imageURL} />\n          <MovieDescription summary={filteredMovie.summary} />\n          <MovieButtons handleClick={handleClick} />\n        </MovieSwipeWrapper>\n      );\n    }}\n  </MovieContext.Consumer>\n);\n\nexport default MovieTinder;\n","import React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\n\nimport MovieContext from '../context';\nimport { RECOMMENDATIONS_URL, buttonActionTypes } from '../../../settings';\n\n\nconst MovieTinderQueryProvider = ({ children }) => {\n  const [moviesList, setMoviesList] = useState([]);\n  const [isLoadingData, setLoadingStatus] = useState(false);\n  const usePrevious = (value) => {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  };\n  const prevMovieList = usePrevious(moviesList);\n  const [filteredMovie, setFilteredMovieList] = useState([]);\n\n  const filterMovies = (list) => {\n    const movie = list.find((element) => element.isAccepted === undefined);\n    setFilteredMovieList(movie);\n  };\n\n  const updateMovie = (updatedMovieData) => {\n    const movieId = moviesList.findIndex((movie) => movie.id === updatedMovieData.id);\n    moviesList[movieId] = updatedMovieData;\n    setMoviesList(moviesList);\n    filterMovies(moviesList);\n  };\n\n  const handleClick = async (actionType) => {\n    try {\n      const response = await axios.put(`${RECOMMENDATIONS_URL}${filteredMovie.id}/${actionType}`, {\n        ...filteredMovie,\n        isAccepted: buttonActionTypes.ACCEPT === actionType,\n      });\n      updateMovie(response.data);\n      console.log(actionType);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    const fetchMovie = async () => {\n      try {\n        const response = await axios.get(RECOMMENDATIONS_URL);\n        if (response) {\n          setLoadingStatus(false);\n          setMoviesList(response.data);\n        }\n        console.log('Not yet get response - loading');\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    if (prevMovieList === undefined) {\n      setLoadingStatus(true);\n      fetchMovie();\n    }\n    if (moviesList) {\n      filterMovies(moviesList);\n    }\n  }, [prevMovieList, moviesList]);\n\n  const movieContextData = {\n    isLoadingData,\n    filteredMovie,\n    handleClick,\n  };\n  return (\n    <MovieContext.Provider value={movieContextData}>\n      {children}\n    </MovieContext.Provider>\n  );\n};\n\nMovieTinderQueryProvider.propTypes = {\n  children: PropTypes.node,\n};\n\nexport default MovieTinderQueryProvider;\n","import React from 'react';\n\nimport MovieTinder from '../../components/MovieTinder';\nimport MovieTinderQueryProvider from '../../components/MovieTinder/MovieTinderQueryProvider';\n\n\nconst MovieContainer = () => (\n  <MovieTinderQueryProvider>\n    <MovieTinder />\n  </MovieTinderQueryProvider>\n);\n\n\nMovieContainer.propTypes = {\n\n};\n\nexport default MovieContainer;\n","import React from 'react';\n\nimport { Root } from './styles';\nimport MovieContainer from './containers/MovieContainer';\n\n\nfunction App() {\n  return (\n    <Root>\n      <MovieContainer />\n    </Root>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}